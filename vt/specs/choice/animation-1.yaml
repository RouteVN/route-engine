---
title: "Choice Animation 1"
description: |
  Test animation in and out for choice container.
  Line 1: Dialogue introduces the choice.
  Line 2: Choice menu appears with fade-in animation.
  Selecting an option triggers fade-out and section transition.
---

l10n:
  packages:
    en-pkg:
      label: English
      lang: en
      keys: {}

screen:
  width: 1920
  height: 1080
  backgroundColor: "#000000"

resources:
  layouts:
    base1:
      elements:
        - id: base-rect
          type: rect
          fill: "#1a1a2e"
          width: 1920
          height: 1080
          click:
            actionPayload:
              actions:
                nextLine: {}

    dialogue-box:
      elements:
        - id: dialogue-bg
          type: rect
          fill: "#000000"
          alpha: 0.8
          x: 100
          y: 700
          width: 1720
          height: 300
        - id: dialogue-text
          type: text
          content: "{{dialogue.content[0].text}}"
          fill: "#ffffff"
          fontSize: 32
          x: 150
          y: 780
          width: 1620

    choice-menu:
      elements:
        - id: choice-bg
          type: rect
          fill: "#000000"
          alpha: 0.9
          x: 660
          y: 340
          width: 600
          height: 400
        - id: choice-title
          type: text
          content: "Make your choice:"
          fill: "#ffcc00"
          fontSize: 28
          x: 960
          y: 380
          anchorX: 0.5
        - id: choice-options
          type: container
          x: 710
          y: 420
          children:
            - "@each": "{{choice.items}}"
              as: "item"
              template:
                - type: rect
                  fill: "#333333"
                  width: 500
                  height: 50
                  y: "{{@index * 70}}"
                  click:
                    actionPayload: "{{item.actionPayload}}"
                - type: text
                  content: "{{item.content}}"
                  fontSize: 24
                  fill: "#ffffff"
                  x: 250
                  y: "{{@index * 70 + 25}}"
                  anchorX: 0.5
                  anchorY: 0.5

  tweens:
    fade-in:
      name: "Fade In"
      properties:
        alpha:
          initialValue: 0
          keyframes:
            - duration: 400
              value: 1
              easing: linear
    fade-out:
      name: "Fade Out"
      properties:
        alpha:
          keyframes:
            - duration: 400
              value: 0
              easing: linear

  characters:
    narrator:
      name: "Narrator"

story:
  initialSceneId: scene1
  scenes:
    scene1:
      name: Choice Animation Test Scene
      initialSectionId: section1
      sections:
        section1:
          name: Main Section
          lines:
            - id: line1
              actions:
                base:
                  resourceId: base1
                dialogue:
                  gui:
                    resourceId: dialogue-box
                  content:
                    - text: "A choice menu will appear with fade-in animation."
            - id: line2
              actions:
                choice:
                  resourceId: choice-menu
                  items:
                    - id: option-1
                      content: "First Option"
                      actionPayload:
                        actions:
                          choice:
                            animations:
                              out:
                                resourceId: fade-out
                          sectionTransition:
                            sectionId: result-a
                    - id: option-2
                      content: "Second Option"
                      actionPayload:
                        actions:
                          choice:
                            animations:
                              out:
                                resourceId: fade-out
                          sectionTransition:
                            sectionId: result-b
                  animations:
                    in:
                      resourceId: fade-in

        result-a:
          name: Result A
          lines:
            - id: result-a-line
              actions:
                dialogue:
                  gui:
                    resourceId: dialogue-box
                  content:
                    - text: "You chose the first option!"

        result-b:
          name: Result B
          lines:
            - id: result-b-line
              actions:
                dialogue:
                  gui:
                    resourceId: dialogue-box
                  content:
                    - text: "You chose the second option!"

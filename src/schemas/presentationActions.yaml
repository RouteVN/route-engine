$schema: http://json-schema.org/draft-07/schema#
title: Presentation Actions Schema
description: Schema for all presentation actions that handle visual and audio display in visual novel engine
type: object
properties:
  cleanAll:
    type: object
    description: Whether to clean/clear all existing state
    properties:
      mode:
        type: string
        description: Mode of cleaning/clearing all existing state
    additionalProperties: false

  base:
    type: object
    description: Base layer behind the background
    properties:
      resourceId:
        type: string
        description: ID of the base resource to display
    additionalProperties: false

  background:
    type: object
    description: Background management and display
    properties:
      resourceId:
        type: string
        description: ID of the background resource to display
      animations:
        type: object
        description: Animation effects for background transitions
        properties:
          in:
            type: object
            description: Animation configuration for background entrance
            properties:
              resourceId:
                type: string
                description: ID of the tween resource to use
            required: [resourceId]
            additionalProperties: false
          out:
            type: object
            description: Animation configuration for background exit
            properties:
              resourceId:
                type: string
                description: ID of the tween resource to use
            required: [resourceId]
            additionalProperties: false
          update:
            type: object
            description: Animation configuration for background update
            properties:
              resourceId:
                type: string
                description: ID of the tween resource to use
            required: [resourceId]
            additionalProperties: false
        additionalProperties: false
    additionalProperties: false

  dialogue:
    type: object
    description: Dialogue display configuration
    properties:
      resourceId:
        type: string
        description: ID of the dialogue box UI element
      content:
        type: string
        description: The dialogue text content
      characterId:
        type: string
        description: ID of the character speaking
    additionalProperties: false

  character:
    type: object
    description: Character display and management
    properties:
      items:
        type: array
        description: Array of character items to display
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the character item
            transformId:
              type: string
              description: ID of the transform where character appears
            x:
              type: number
              description: Custom x position to override transform x
            y:
              type: number
              description: Custom y position to override transform y
            sprites:
              type: array
              description: Array of sprite parts that make up the character
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: Identifier for the sprite part
                  imageId:
                    type: string
                    description: ID of the sprite part resource
                additionalProperties: false
          required: [id]
          additionalProperties: false
    additionalProperties: false

  visual:
    type: object
    description: Visual elements and effects technically same as background but different z index
    properties:
      items:
        type: array
        description: Array of visual items to display
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the visual item
            resourceId:
              type: string
              description: ID of the resource
            transformId:
              type: string
              description: ID of the transform where visual appears
            animations:
              type: object
              description: Animation effects for visual transitions
              properties:
                in:
                  type: object
                  description: Animation configuration for visual entrance
                  properties:
                    resourceId:
                      type: string
                      description: ID of the tween resource to use
                  required: [resourceId]
                  additionalProperties: false
                out:
                  type: object
                  description: Animation configuration for visual exit
                  properties:
                    resourceId:
                      type: string
                      description: ID of the tween resource to use
                  required: [resourceId]
                  additionalProperties: false
                update:
                  type: object
                  description: Animation configuration for visual update
                  properties:
                    resourceId:
                      type: string
                      description: ID of the tween resource to use
                  required: [resourceId]
                  additionalProperties: false
              additionalProperties: false
          required: [id]
          additionalProperties: false
    additionalProperties: false

  choice:
    type: object
    description: Choice system configuration
    properties:
      resourceId:
        type: string
        description: ID of the choice layout UI element
      items:
        type: array
        description: Array of choice options
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the choice option
            content:
              type: string
              description: Text content of the choice option
          required: [id, content]
          additionalProperties: false
    additionalProperties: false

  sfx:
    type: object
    description: Sound effects configuration
    properties:
      items:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the sound effect
            resourceId:
              type: string
              description: ID of the sound effect resource
          required: [id, resourceId]
          additionalProperties: false
    additionalProperties: false

  bgm:
    type: object
    description: Background music configuration
    properties:
      resourceId:
        type: string
        description: ID of the background music resource
    additionalProperties: false
  
  keyboard:
    type: object
    description: Sets the active keyboard mapping
    properties:
      resourceId:
        type: string
        description: ID of the keyboard resource to activate
    required: [resourceId]
    additionalProperties: false

  # TODO: check if can make this more generalized
  layout:
    type: object
    description: Layout configuration for UI layouts
    properties:
      resourceIdId:
        type: string
        description: ID of the layout to display
    additionalProperties: false

additionalProperties: false

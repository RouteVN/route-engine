$schema: http://json-schema.org/draft-07/schema#
title: Presets Schema
description: Schema for presets in visual novel project data
type: object
patternProperties:
  "^[a-zA-Z0-9_-]+$":
    type: object
    properties:
      name:
        type: string
        description: Display name for the preset

      eventsMap:
        type: object
        description: Event handling configuration
        patternProperties:
          "^[a-zA-Z0-9_-]+$":
            type: object
            properties:
              systemInstructions:
                type: object
                description: System-level instructions to execute
                properties:
                  nextLine:
                    type: object
                    description: Advance to next line
                    properties:
                      forceSkipAutonext:
                        type: boolean
                        description: Force skip auto-next behavior
                        default: false
                    additionalProperties: false

                  prevLine:
                    type: object
                    description: Go to previous line
                    additionalProperties: false

                  sectionTransition:
                    type: object
                    description: Navigate to specific scene/section
                    properties:
                      sectionId:
                        type: string
                        description: Target section ID
                      sceneId:
                        type: string
                        description: Target scene ID (optional)
                      mode:
                        type: string
                        description: Navigation mode
                        enum: [read, menu, history, title]
                      presetId:
                        type: string
                        description: Preset to use after navigation
                    additionalProperties: false

                  updateVariable:
                    type: object
                    description: Update game variables
                    properties:
                      operations:
                        type: array
                        description: Array of variable operations
                        items:
                          type: object
                          properties:
                            variableId:
                              type: string
                              description: ID of the variable to update
                            op:
                              type: string
                              description: Operation to perform
                              enum:
                                [
                                  set,
                                  add,
                                  subtract,
                                  multiply,
                                  divide,
                                  increment,
                                  decrement,
                                ]
                            value:
                              description: Value for the operation
                              oneOf:
                                - type: string
                                - type: number
                                - type: boolean
                          required: [variableId, op]
                          additionalProperties: false
                        minItems: 1
                    required: [operations]
                    additionalProperties: false

                  clearCurrentMode:
                    type: object
                    description: Clear current mode and switch to new one
                    properties:
                      mode:
                        type: string
                        description: New mode to switch to
                        enum: [read, menu, history, title]
                    required: [mode]
                    additionalProperties: false

                  toggleAutoMode:
                    type: object
                    description: Toggle auto-advance mode
                    additionalProperties: false

                  toggleSkipMode:
                    type: object
                    description: Toggle skip mode
                    additionalProperties: false

                  toggleDialogueUIHidden:
                    type: object
                    description: Toggle dialogue UI visibility
                    additionalProperties: false

                  startAutoMode:
                    type: object
                    description: Start auto-advance mode
                    additionalProperties: false

                  stopAutoMode:
                    type: object
                    description: Stop auto-advance mode
                    additionalProperties: false

                  startSkipMode:
                    type: object
                    description: Start skip mode
                    additionalProperties: false

                  stopSkipMode:
                    type: object
                    description: Stop skip mode
                    additionalProperties: false

                  setPreset:
                    type: object
                    description: Set the current preset
                    properties:
                      presetId:
                        type: string
                        description: Preset ID to switch to
                    required: [presetId]
                    additionalProperties: false

                  saveVnData:
                    type: object
                    description: Save game data
                    properties:
                      slotIndex:
                        type: number
                        description: Save slot index
                        minimum: 0
                    required: [slotIndex]
                    additionalProperties: false

                  loadVnData:
                    type: object
                    description: Load game data
                    properties:
                      slotIndex:
                        type: number
                        description: Load slot index
                        minimum: 0
                    required: [slotIndex]
                    additionalProperties: false

                  lineCompleted:
                    type: object
                    description: Handle line completion
                    additionalProperties: false

                additionalProperties: false

              customInstructions:
                type: object
                description: Custom game-specific instructions
                additionalProperties: true

            additionalProperties: false
        additionalProperties: false

    required: [name, eventsMap]
    additionalProperties: false

additionalProperties: false

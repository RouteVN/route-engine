$schema: http://json-schema.org/draft-07/schema#
title: Presentation Schema
description: Schema for presentation objects in visual novel engine. All properties are singular
type: object
properties:
  cleanAll:
    type: object
    description: Whether to clean/clear all existing state
    properties:
      mode:
        type: string
        description: Mode of cleaning/clearing all existing state

  background:
    type: object
    description: Background management and display
    properties:
      resourceId:
        type: string
        description: ID of the background resource to display
      resourceType:
        type: string
        description: Type of the background resource
        enum: [image]
      animations:
        type: object
        description: Animation effects for background transitions
        properties:
          in:
            type: string
            description: Animation ID for background entrance
          out:
            type: string
            description: Animation ID for background exit
        additionalProperties: false
    additionalProperties: false

  dialogue:
    type: object
    description: Dialogue display configuration
    properties:
      layoutId:
        type: string
        description: ID of the dialogue box UI element
      content:
        type: string
        description: The dialogue text content
      characterId:
        type: string
        description: ID of the character speaking
      # character:
      #   type: object
      #   description: Character information for dialogue. This will overwrite characterId values
      #   properties:
      #     name:
      #       type: string
      #       description: Name of the character
      #   additionalProperties: false
    additionalProperties: false

  character:
    type: object
    description: Character display and management
    properties:
      items:
        type: array
        description: Array of character items to display
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the character item
            transformId:
              type: string
              description: ID of the transform where character appears
            sprites:
              type: array
              description: Array of sprite parts that make up the character
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: Identifier for the sprite part
                  imageId:
                    type: string
                    description: ID of the sprite part resource
                additionalProperties: false
            # inAnimation:
            #   type: string
            #   description: Animation ID for character entrance
            # outAnimation:
            #   type: string
            #   description: Animation ID for character exit
          required: [id]
          additionalProperties: false
    additionalProperties: false

  visual:
    type: object
    description: Visual elements and effects technically same as background but different z index
    properties:
      items:
        type: array
        description: Array of visual items to display
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the visual item
            resourceId:
              type: string
              description: ID of the resource
            resourceType:
              type: string
              description: Type of the resource
            transformId:
              type: string
              description: ID of the transform where visual appears
            # animations:
            #   type: object
            #   description: Animation effects for visual transitions
            #   properties:
            #     in:
            #       type: string
            #       description: Animation ID for visual entrance
            #     out:
            #       type: string
            #       description: Animation ID for visual exit
            #   additionalProperties: false
          required: [id]
          additionalProperties: false
    additionalProperties: false

  choice:
    type: object
    description: Choice system configuration
    properties:
      layoutId:
        type: string
        description: ID of the choice layout UI element
      items:
        type: array
        description: Array of choice options
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the choice option
            content:
              type: string
              description: Text content of the choice option
            # value:
            #   type: string
            #   description: Value associated with the choice
            # enabled:
            #   type: boolean
            #   description: Whether the choice is selectable
            #   default: true
          required: [text]
          additionalProperties: false
    additionalProperties: false

  sfx:
    type: object
    description: Sound effects configuration
    properties:
      items:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
              description: Unique identifier for the sound effect
            audioId:
              type: string
              description: ID of the sound effect resource
            # volume:
            #   type: number
            #   description: Volume level for the sound effect
            #   minimum: 0
            #   maximum: 1
            # loop:
            #   type: boolean
            #   description: Whether the sound effect should loop
            #   default: false
          required: [id, audioId]
          additionalProperties: false
    additionalProperties: false

  bgm:
    type: object
    description: Background music configuration
    properties:
      audioId:
        type: string
        description: ID of the background music resource
      # volume:
      #   type: number
      #   description: Volume level for the background music
      #   minimum: 0
      #   maximum: 1
      # loop:
      #   type: boolean
      #   description: Whether the background music should loop
      #   default: true
      # fadeIn:
      #   type: number
      #   description: Fade-in duration in milliseconds
      # fadeOut:
      #   type: number
      #   description: Fade-out duration in milliseconds
    additionalProperties: false

  animation:
    type: object
    description: Direct animation effects
    properties:
      animationId:
        type: string
        description: ID of the animation resource
      target:
        type: string
        description: Target element for the animation
      duration:
        type: number
        description: Animation duration in milliseconds
      easing:
        type: string
        description: Animation easing function
        enum: [linear, ease-in, ease-out, ease-in-out]
    additionalProperties: false

additionalProperties: false

$schema: http://json-schema.org/draft-07/schema#
title: Story Schema
description: Schema for the complete story structure in visual novel engine
type: object
properties:
  initialSceneId:
    type: string
    description: ID of the scene to start with

  scenes:
    type: object
    description: Collection of scenes in the story
    patternProperties:
      "^[a-zA-Z0-9]+$":
        type: object
        description: Scene definition
        properties:
          name:
            type: string
            description: Display name for the scene

          initialSectionId:
            type: string
            description: ID of the section to start with when entering this scene

          sections:
            type: object
            description: Collection of sections within this scene
            patternProperties:
              "^[a-zA-Z0-9]+$":
                type: object
                description: Section definition
                properties:
                  name:
                    type: string
                    description: Display name for the section

                  lines:
                    type: array
                    description: Array of story lines/steps within this section
                    items:
                      type: object
                      description: Individual story line/step
                      properties:
                        id:
                          type: string
                          description: Unique identifier for the line
                        actions:
                          allOf:
                            - $ref: "../presentationActions.yaml"
                            - $ref: "../systemActions.yaml"
                          description: Actions

                      required: [id, actions]
                      additionalProperties: false

                required: [name]
                additionalProperties: false
            additionalProperties: false

        required: [name, initialSectionId, sections]
        additionalProperties: false
    additionalProperties: false

required: [initialPresetId, initialSceneId, scenes]
additionalProperties: false
